pipeline {
    agent none

    stages {
        stage('Build and run') {
          parallel {
            stage('slave1-agent-pipeline') {
              agent {label 'dev'}
              stages{
                stage('GIT CHECKOUT'){
            steps {
                script {
                    // Checkout the specified branch
                    def branchName = params.BRANCH_NAME
                    checkout([$class: 'GitSCM', branches: [[name: branchName]], userRemoteConfigs: [[url: 'https://github.com/devopsdump/Java_hello_app.git']]])
                }
            }
         }
               stage("Build") {
            steps {
                sh "mvn clean package"
                sh "mv target/hello-1.0.war target/boxfuse-sample-java-war-hello.war"
            }
        }
	       }
              }
            stage('slave2-agent-pipeline') {
              agent {label 'slave2'}
              stages{
                stage("Testing") {
            steps {
                echo "Test Runs"
            
            }
        }
                
               }
              }
             }
            }
           }
          }
